(this.webpackJsonpcrayfish=this.webpackJsonpcrayfish||[]).push([[0],{211:function(e,t,a){e.exports=a(395)},394:function(e,t,a){},395:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),o=a.n(c),i=a(11),l=a(23),s=a(12),u=a(38),m=a(180),d=a(85),h=a.n(d),E=a(9),p=a(417),f=a(94),v=a(181),w=a.n(v),g=(a(231),a(13)),b=a.n(g),S=a(410),y=a(201),O=a(29),_=a.n(O),C=function(e){return function(t){t(function(e){return{type:"SET_SHOW",payload:e}}(e))}};var T=Object(s.b)((function(e){return{panel:e.panel}}),{setShowDisplay:C})((function(e){return r.a.createElement(S.a,{className:"card_background",onClick:function(){return t=e.show.id,void e.setShowDisplay(t);var t}},r.a.createElement("div",{className:"h3 p-1"},e.show.artists[0].name),r.a.createElement(y.a,{className:"card_image",style:{borderRadius:"5%"},src:e.show.poster_img_url,ui:!1}),r.a.createElement("div",null,r.a.createElement("div",{className:"h3 p-1"},e.show.title),r.a.createElement("div",{className:"h4 px-1 my-0"},r.a.createElement(_.a,{interval:0,format:"MMM Do - LT",date:e.show.show_datetime})),r.a.createElement("div",{className:"h5 p-1"},e.show.language," - ",e.show.genre)))}));var j=function(e){var t=window.outerWidth,a=Object(n.useState)(1),c=Object(E.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){i(Math.round(t/320))}),[]);var l=b.a.map(e.shows,(function(t,a){return r.a.createElement(T,{key:a,show:t,addToCart:e.addToCart})}));return r.a.createElement(S.a.Group,{className:"py-5",itemsPerRow:o,style:{border:"none"}},l)},k="https://api.odiance.com",I=function(){return function(e){e({type:"FETCH_SHOWS_REQUEST"}),fetch("".concat(k,"/api/shows/")).then((function(e){return e.json()})).then((function(t){e({type:"FETCH_SHOWS_SUCCESS",payload:t})})).catch((function(t){e(function(e){return{type:"FETCH_SHOWS_FAILURE",payload:e}}(t))}))}},N=a(17),R=a.n(N),x=function(e){return{type:"SET_PAYMENT_STATUS",payload:e}},L=function(){return localStorage.removeItem("orderId"),{type:"CLEAR_STRIPE"}},U=function(e,t){return{type:"ADD_TO_CART",payload:{show:e,quantity:t}}},A=Object(s.b)((function(e){return{shows:e.shows.data}}),{fetchShows:I,addToCart:U,setShowDisplay:C})((function(e){var t=Object(i.g)().slug;return Object(n.useEffect)((function(){e.fetchShows()}),[]),Object(n.useEffect)((function(){if(void 0!==t){var a=b.a.result(b.a.find(e.shows,(function(e){return e.slug===t})),"id");void 0!==a&&e.setShowDisplay(a)}}),[e.shows]),r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{shows:e.shows,addToCart:e.addToCart,history:e.history}))})),P=a(411),F=a(403),W=a(412),H=a(406);var D=function(e){var t=Object(n.useState)(""),a=Object(E.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),l=Object(E.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(""),d=Object(E.a)(m,2),h=d[0],p=d[1],f=Object(n.useState)(""),v=Object(E.a)(f,2),w=v[0],g=v[1],b=Object(n.useState)(""),S=Object(E.a)(b,2),y=S[0],O=S[1],_=Object(n.useState)(""),C=Object(E.a)(_,2),T=C[0],j=C[1],k=Object(n.useState)(!0),I=Object(E.a)(k,2),N=I[0],R=I[1];function x(){R(!N)}function L(e){var t=e.target,a=t.name,n=t.value;"usernameOrEmail"===a?o(n):"password"===a&&u(n)}function U(e){var t=e.target,a=t.name,n=t.value;"username"===a?p(n):"email"===a?g(n):"signupPassword"===a?O(n):"confirmPassword"===a&&j(n)}var A=r.a.createElement("div",null,e.auth.loading&&r.a.createElement(P.a,{active:!0},r.a.createElement(F.a,null)),r.a.createElement("div",{className:"center-child"},e.auth.error&&r.a.createElement(W.a,{color:"red"},"Log in failed, please check your credentials again."),r.a.createElement(H.a,null,r.a.createElement("label",{className:"text-white h5"},"Username or E-mail"),r.a.createElement(H.a.Input,{icon:"user",iconPosition:"left",name:"usernameOrEmail",value:c,placeholder:"Username or E-mail",onChange:L,error:"undefined"!==typeof e.auth.error,size:"big"}),r.a.createElement("label",{className:"text-white h5"},"Password"),r.a.createElement(H.a.Input,{icon:"lock",iconPosition:"left",type:"password",name:"password",value:s,placeholder:"Password",onChange:L,error:"undefined"!==typeof e.auth.error,size:"big"}),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){t.preventDefault(),e.login(c,s)}},"Sign In")),r.a.createElement("a",{className:"d-block text-center text-white h5 m-4",onClick:function(){return x()}},r.a.createElement("u",null,"Don't have an account?")))),D=r.a.createElement("div",null,e.signup.loading&&r.a.createElement(P.a,{active:!0},r.a.createElement(F.a,null)),r.a.createElement("div",{className:"center-child"},e.signup.error&&r.a.createElement(W.a,{color:"red"},"A user with that username already exists."),e.signup.success&&r.a.createElement(W.a,{color:"green"},"Your account is now available. Sign in to continue."),r.a.createElement(H.a,null,r.a.createElement("label",{className:"text-white h5"},"Username"),r.a.createElement(H.a.Input,{icon:"user",iconPosition:"left",name:"username",value:h,placeholder:"Username",onChange:U,size:"big"}),r.a.createElement("label",{className:"text-white h5"},"Email"),r.a.createElement(H.a.Input,{icon:"mail",iconPosition:"left",name:"email",value:w,placeholder:"E-mail",onChange:U,size:"big"}),r.a.createElement("label",{className:"text-white h5"},"Password"),r.a.createElement(H.a.Input,{icon:"lock",iconPosition:"left",type:"password",name:"signupPassword",value:y,placeholder:"Password",onChange:U,size:"big"}),r.a.createElement("label",{className:"text-white h5"},"Confirm Password"),r.a.createElement(H.a.Input,{icon:"lock",iconPosition:"left",type:"password",name:"confirmPassword",value:T,placeholder:"Confirm Password",onChange:U,size:"big"}),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){t.preventDefault();var a={username:h,email:w,password:y,confirmPassword:T};e.userSignupRequest(a)}},"Sign Up")),r.a.createElement("a",{className:"d-block text-center text-white h5 m-4",onClick:function(){return x()}},r.a.createElement("u",null,"Already have an account?"))));return r.a.createElement("div",null,N?r.a.createElement(r.a.Fragment,null,A):r.a.createElement(r.a.Fragment,null,D))},z=a(415),M=a(404),G=a(409),q=a(408),Q=a(20);var V=function(e){var t=Object(n.useState)([]),a=Object(E.a)(t,2),c=a[0],o=a[1];Object(n.useEffect)((function(){void 0!==e.tickets&&e.tickets.length>0&&o(function(e){for(var t=[],a=[],n=0;n<e.length;n++){var r=e[n].show;t.includes(r.id)||(t.push(r.id),a.push(r))}return a}(e.tickets))}),[e.tickets]);var i=b.a.map(c,(function(t,a){return r.a.createElement(q.a,{key:a},r.a.createElement(q.a.Image,{size:"small",src:t.poster_img_url}),r.a.createElement(q.a.Content,null,r.a.createElement("div",{className:"h3 text-white"},t.artists[0].name),r.a.createElement("div",{className:"h5 text-white"},r.a.createElement("b",null,t.title)),r.a.createElement(q.a.Meta,null,r.a.createElement("div",{className:"h5 text-white"},r.a.createElement(_.a,{interval:0,format:"MMM Do - LT",date:t.show_datetime}))),r.a.createElement(q.a.Description,null,r.a.createElement("div",{className:"text-white h5"},"You have ",(n=t.id,b.a.filter(e.tickets,(function(e,t){if(e.show.id===n)return e})).length)," tickets for this show.")),r.a.createElement(G.a,{divided:!0,relaxed:!0},function(t){return b.a.map(e.tickets,(function(e,a){if(e.show.id===t)return r.a.createElement(G.a.Item,{key:a},r.a.createElement(G.a.Content,null,r.a.createElement(G.a.Header,{as:Q.a,to:"/live/".concat(e.uuid)},e.uuid),r.a.createElement(G.a.Description,null,r.a.createElement("div",{className:"h6"},e.active?r.a.createElement("span",{className:"text-success"},"Active"):r.a.createElement("span",{className:"text-secondary"},"Inactive")))))}))}(t.id))));var n})),l=r.a.createElement(q.a.Group,{divided:!0},i);return r.a.createElement("div",null,c.length>0?l:r.a.createElement("p",null,"No shows for you :("))};var K=function(e){return r.a.createElement("div",null,r.a.createElement(z.a,{as:"h2",inverted:!0,dividing:!0},"TICKETS"),r.a.createElement(V,{tickets:e.tickets}),r.a.createElement(M.a,null),r.a.createElement("div",{className:"d-block text-white h6"},"Logged in as ",r.a.createElement("b",null,e.auth.user.username),r.a.createElement("div",{className:"float-right",onClick:function(){e.logout()}},"Logout")))},Y=function(e){return{type:"LOGIN_SUCCESS",payload:e}},B=function(e){e?R.a.defaults.headers.common.Authorization="JWT ".concat(e):delete R.a.defaults.headers.common.Authorization},X=function(){return function(e){localStorage.removeItem("jwtToken"),B(!1),e(Y({}))}};var J=Object(s.b)((function(e,t){return{auth:e.auth,signup:e.signup,orders:e.account.data,tickets:e.tickets.data}}),{login:function(e,t){return function(a){a(function(e){return{type:"LOGIN_REQUEST",payload:e}}(e)),R.a.post("".concat(k,"/accounts/accounts-token-auth/"),{username:e,password:t}).then((function(e){var t=e.data.token;localStorage.setItem("jwtToken",t),B(t),a(Y(h()(t))),console.log("login successful")})).catch((function(e){a(function(e){return{type:"LOGIN_FAILURE",payload:e}}(e.response))}))}},logout:X,userSignupRequest:function(e){return function(t){t({type:"SIGNUP_REQUEST"}),R.a.post("".concat(k,"/accounts/users/"),e).then((function(e){console.log("Welcome! Your account is available now."),t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t(function(e){return{type:"SIGNUP_FAILURE",payload:e}}(e.response)),400===e.response.status&&"A user with that username already exists."===e.response.data.username[0]&&console.log("A user with that username already exists.")}))}},fetchOrders:function(){return function(e){e({type:"FETCH_ORDERS_REQUEST"}),R.a.get("".concat(k,"/api/orders/")).then((function(t){e({type:"FETCH_ORDERS_SUCCESS",payload:t.data})})).catch((function(t){e({type:"FETCH_ORDERS_FAILURE",payload:t})}))}},fetchTickets:function(){return function(e){e({type:"FETCH_TICKETS_REQUEST"}),R.a.get("".concat(k,"/api/tickets/")).then((function(t){e({type:"FETCH_TICKETS_SUCCESS",payload:t.data})})).catch((function(t){e({type:"FETCH_TICKETS_FAILURE",payload:t})}))}}})((function(e){return Object(n.useEffect)((function(){e.auth.isAuthenticated&&(e.fetchOrders(),e.fetchTickets())}),[e.auth]),r.a.createElement("div",{className:"p-2"},e.auth.isAuthenticated?r.a.createElement(K,{auth:e.auth,logout:e.logout,history:e.history,orders:e.orders,tickets:e.tickets}):r.a.createElement(D,{login:e.login,logout:e.logout,userSignupRequest:e.userSignupRequest,auth:e.auth,signup:e.signup}))})),$=a(123),Z=a.n($),ee=a(195),te=a(196),ae=a(413);var ne=function(e){var t=0,a=b.a.map(e.cart,(function(a,n){return t+=a.show.show_price*a.quantity,r.a.createElement(q.a,{key:n},r.a.createElement(q.a.Image,{size:"small",src:a.show.poster_img_url}),r.a.createElement(q.a.Content,null,r.a.createElement("div",{className:"h3 text-white"},a.show.artists[0].name),r.a.createElement("div",{className:"h5 text-white"},r.a.createElement("b",null,a.show.title)),r.a.createElement(q.a.Meta,null,r.a.createElement("div",{className:"h5 text-white"},r.a.createElement(_.a,{interval:0,format:"MMM Do - LT",date:a.show.show_datetime}))),r.a.createElement(q.a.Description,null,r.a.createElement("div",{className:"h6 text-white"},a.quantity," tickets X USD ",a.show.show_price)),r.a.createElement(q.a.Extra,null,r.a.createElement(ae.a,{circular:!0,icon:"trash",onClick:function(t){return e.handleRemoveItem(t,a)}}),r.a.createElement(ae.a,{circular:!0,icon:"plus",onClick:function(t){return e.handleAddQuantity(t,a)}}),r.a.createElement(ae.a,{circular:!0,icon:"minus",onClick:function(t){return e.handleRemoveQuantity(t,a)}}))))})),n=r.a.createElement(q.a.Group,{divided:!0},a),c=r.a.createElement("div",{className:"text-white d-block"},r.a.createElement("div",{className:""},r.a.createElement("p",{className:"h5"},"You haven't selected any events."),r.a.createElement("p",{className:"h6"},"There are no tickets in your cart, go pick some live shows.")));return r.a.createElement("div",null,a.length>0?n:c,r.a.createElement(M.a,null),a.length>0&&r.a.createElement("div",{className:"d-inline-block text-white"},r.a.createElement("div",{className:"d-block h6"},r.a.createElement("b",null,"Tickets:"),"\xa0\xa0USD ",t.toFixed(2)),r.a.createElement("div",{className:"d-block h6"},r.a.createElement("b",null,"Taxes (13%):"),"\xa0\xa0USD ",function(e){return.13*e}(t).toFixed(2)),r.a.createElement("div",{className:"d-block h6"},r.a.createElement("b",null,"Processing Fees (2.99% + $0.3):"),"\xa0\xa0USD ",function(e){return.0199*(e+.13*e)+.3}(t).toFixed(2)),r.a.createElement("div",{className:"d-block h3"},r.a.createElement("b",null,"Total:\xa0\xa0USD ",function(e){return e+.13*e+(.0199*(e+.13*e)+.3)}(t).toFixed(2)))),r.a.createElement(ae.a,{primary:!0,floated:"right",disabled:a.length<=0,onClick:function(){return e.submit()}},"Buy tickets"))},re=Object(te.a)("pk_test_51HI1opH9PLlFARsrME2IYTZG7xTcYBrTRJri7xqbVsmiaNU3UdQcpyCPapkW7Tqz2kxFUtO2XgDxpMAGXBbcjDn600OstLfq3B");var ce=Object(s.b)((function(e){return{cart:e.cart,auth:e.auth,stripe:e.stripe}}),{removeFromCart:function(e){return{type:"REMOVE_FROM_CART",payload:{id:e}}},clearCart:function(){return{type:"CLEAR_CART"}},placeOrder:function(e){return function(t){var a=0,n=[],r=[],c=[];b.a.forEach(e,(function(e){a+=e.show.show_price*e.quantity,n.push(e.show.title),r.push(e.show.show_price),c.push(e.quantity)})),R.a.post("".concat(k,"/api/orders/"),{shows:n,quantities:c,prices:r,total_price:a.toFixed(2)}).then((function(e){var a=e.data.id,n=e.data.stripe_session.id;localStorage.setItem("orderId",a),t(function(e){return{type:"SET_STRIPE_CHECKOUT",payload:{checkoutId:e}}}(n))}))}},addToCart:U})((function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],o=a[1];function i(){return(i=Object(ee.a)(Z.a.mark((function e(t){var a,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re;case 2:return a=e.sent,e.next=5,a.redirectToCheckout({sessionId:t});case 5:n=e.sent,o(!1),n.error&&console.log(n.error);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){"checkoutId"in e.stripe&&(o(!1),function(e){i.apply(this,arguments)}(e.stripe.checkoutId))}),[e.stripe]);var l=r.a.createElement("div",{className:"center"},r.a.createElement("a",{className:"center-child",href:"#",onClick:function(){return e.handleTogglePane("account")}},"Login to view cart"));return r.a.createElement("div",{className:"p-2"},e.auth.isAuthenticated?r.a.createElement("div",null,c&&r.a.createElement(P.a,{active:!0},r.a.createElement(F.a,null)),r.a.createElement(z.a,{as:"h2",inverted:!0,dividing:!0},"CART"),r.a.createElement(ne,{cart:e.cart,handleRemoveItem:function(t,a){t.stopPropagation(),e.removeFromCart(a.id)},clearCart:e.clearCart,handleAddQuantity:function(t,a){t.stopPropagation(),e.addToCart(a.show,1)},handleRemoveQuantity:function(t,a){t.stopPropagation(),e.addToCart(a.show,-1)},submit:function(){o(!0),e.placeOrder(e.cart)}})):l)})),oe=a(405);var ie=Object(s.b)((function(e){return{panel:e.panel}}),{addToCart:U})((function(e){var t=Object(n.useState)(1),a=Object(E.a)(t,2),c=a[0];return a[1],r.a.createElement(oe.a,{fluid:!0,className:"p-3"},r.a.createElement(q.a.Group,null,r.a.createElement(q.a,null,r.a.createElement(q.a.Image,{size:"small",src:e.show.poster_img_url}),r.a.createElement(q.a.Content,null,r.a.createElement("div",{className:"h3 text-white"},e.show.artists[0].name),r.a.createElement("div",{className:"h5 text-white"},e.show.title),r.a.createElement(M.a,null),r.a.createElement(q.a.Meta,null,r.a.createElement("div",{className:"h5 text-white"},r.a.createElement(_.a,{interval:0,format:"MMM Do - LT",date:e.show.show_datetime}),r.a.createElement(ae.a,{size:"tiny",color:"red",floated:"right",onClick:function(){e.addToCart(e.show,c),console.log("Added <b>".concat(e.show.title,"</b> into shopping-cart."))},className:"custom-btn"},"USD ",e.show.show_price)))))),"No description"!==e.show.description&&r.a.createElement("div",{className:"h4 text-white"},e.show.description))}));var le=Object(s.b)((function(e,t){return{auth:e.auth}}),{})((function(e){var t=Object(n.useState)(""),a=Object(E.a)(t,2),c=a[0],o=a[1];return r.a.createElement(oe.a,{fluid:!0},r.a.createElement("center",{className:"p-5"},r.a.createElement("div",{className:"ticket-form-width"},r.a.createElement("div",{className:"text-white h2 p-3"},r.a.createElement("b",null,"Use your ticket to enter the live show")),r.a.createElement(H.a,null,r.a.createElement(H.a.Input,{icon:"ticket",iconPosition:"left",name:"ticketId",value:c,placeholder:"Enter your ticket Id",onChange:function(e){var t=e.target,a=(t.name,t.value);o(a)},size:"big"}),r.a.createElement(ae.a,{primary:!0,type:"submit",onClick:function(t){t.preventDefault(),e.history.push("/live/".concat(c))}},"Enter")))))})),se=a(197),ue=a.n(se),me=(a(132),a(84),{file:{forceHLS:!0}});var de=function(e){return r.a.createElement("div",null,r.a.createElement(oe.a,{fluid:!0},r.a.createElement("div",{className:"player-wrapper p-3"},r.a.createElement(ue.a,{className:"player",controls:!0,muted:!0,config:me,url:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",playing:!0,width:"100%",height:"100%"}))),r.a.createElement(q.a.Group,null,r.a.createElement(q.a,null,r.a.createElement(q.a.Image,{size:"small",src:e.liveshow.show.poster_img_url}),r.a.createElement(q.a.Content,null,r.a.createElement("div",{className:"h2 text-white"},e.liveshow.show.title),r.a.createElement("div",{className:"h4 text-white"},e.liveshow.show.artists[0].name),r.a.createElement(q.a.Description,null,r.a.createElement("div",{className:"h5 text-white"},r.a.createElement(_.a,{fromNow:!0},e.liveshow.show.show_datetime),r.a.createElement("div",{className:"h5 text-white"},r.a.createElement(_.a,{interval:0,format:"MMM Do - LT",date:e.liveshow.show.show_datetime}))))))))},he=function(e,t){R.a.patch("".concat(k,"/api/tickets/").concat(e,"/ticket/"),{active:t})};var Ee=Object(s.b)((function(e,t){return{auth:e.auth,liveshow:e.liveshow}}),{fetchLiveShow:function(e){return function(t){t(function(e){return{type:"LIVESHOW_REQUEST",payload:e}}(e)),R.a.get("".concat(k,"/api/tickets/").concat(e,"/ticket/")).then((function(e){t({type:"LIVESHOW_SUCCESS",payload:e.data}),localStorage.setItem("liveshowId",e.data.uuid)})).catch((function(e){t({type:"LIVESHOW_FAILURE",payload:e})}))}},clearLiveShow:function(){return function(e){localStorage.removeItem("liveshowId"),e({type:"LIVESHOW_CLEAR"})}}})((function(e){var t,a=Object(n.useState)(null),c=Object(E.a)(a,2),o=(c[0],c[1],Object(i.g)().ticket);function l(t){t.preventDefault();var a=localStorage.getItem("liveshowId");void 0!==a&&(he(a,!1),e.clearLiveShow())}return Object(n.useEffect)((function(){void 0!==o&&e.fetchLiveShow(o)}),[o]),Object(n.useEffect)((function(){void 0!==e.liveshow.data&&he(e.liveshow.data.uuid,!0)}),[e.liveshow]),Object(n.useEffect)((function(){return window.addEventListener("unload",l),function(){var t=localStorage.getItem("liveshowId");void 0!==t&&(he(t,!1),e.clearLiveShow()),window.removeEventListener("unload",l)}}),[]),r.a.createElement("div",{className:"p-3"},e.liveshow.isLoading&&r.a.createElement(P.a,{active:!0},r.a.createElement(F.a,null)),e.liveshow.error&&(404===(t=e.liveshow.error).response.status?r.a.createElement("div",{className:"text-white"},"Ticket not found"):423===t.response.status?r.a.createElement("div",{className:"text-white"},"Ticket is being used on another device"):r.a.createElement("div",{className:"text-white"},"Something went wrong")),void 0!==e.liveshow.data&&r.a.createElement(de,{liveshow:e.liveshow.data}))})),pe=a(414),fe=a(40),ve=a(92),we=a(198),ge=a.n(we),be=function(e){e.children;var t=e.getWidth,n=e.props;return r.a.createElement(p.a,{fireOnMount:!0,getWidth:t,minWidth:p.a.onlyTablet.minWidth},r.a.createElement(pe.a,{id:"navbar",className:"menu_background p-4 m-0",size:"massive",secondary:!0},r.a.createElement(pe.a.Item,{as:Q.a,to:"/",header:!0},r.a.createElement(y.a,{src:a(84),size:"small"})),r.a.createElement(pe.a.Menu,{position:"right"},r.a.createElement(pe.a.Item,{name:"LIVE",color:"blue",style:{color:"white"},as:Q.a,to:"/live"},"LIVE"),r.a.createElement(pe.a.Item,{onClick:function(){return n.handleTogglePane("account")}},n.auth.isAuthenticated?r.a.createElement(fe.a,{size:"large",name:"user circle",inverted:!0}):r.a.createElement("span",{className:"text-white"},"LOGIN")),r.a.createElement(pe.a.Item,null,r.a.createElement(ae.a,{onClick:function(){return n.handleTogglePane("cart")},icon:!0,inverted:!0,className:"cart-btn"},r.a.createElement(fe.a,{size:"large",name:"cart"}),r.a.createElement(ve.a,{style:{zIndex:0},color:"red",floating:!0},n.itemsInCartCount))))))},Se=function(e){e.children;var t=e.getWidth,n=e.props;return r.a.createElement(p.a,{fireOnMount:!0,getWidth:t,maxWidth:p.a.onlyMobile.maxWidth},r.a.createElement(pe.a,{className:"menu_background p-4 m-0",size:"massive",secondary:!0},r.a.createElement(pe.a.Item,{as:Q.a,to:"/",header:!0,className:"d-block"},r.a.createElement(y.a,{src:a(84),size:"small"}))),r.a.createElement(pe.a,{className:"menu_background p-4 m-0",size:"massive",secondary:!0},r.a.createElement(pe.a.Item,{style:{color:"white"},as:Q.a,to:"/live"},"LIVE"),r.a.createElement(pe.a.Item,{as:Q.a,to:"/account"},n.auth.isAuthenticated?r.a.createElement(fe.a,{size:"large",name:"user circle",inverted:!0}):r.a.createElement("span",{className:"text-white"},"LOGIN")),r.a.createElement(pe.a.Item,null,r.a.createElement(ae.a,{as:Q.a,to:"/cart",icon:!0,inverted:!0,className:"cart-btn"},r.a.createElement(fe.a,{size:"large",name:"cart"}),r.a.createElement(ve.a,{style:{zIndex:0},color:"red",floating:!0},n.itemsInCartCount)))))},ye=function(e){var t=e.children,a=e.getWidth,n=e.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,{getWidth:a,props:n},t),r.a.createElement(Se,{getWidth:a,props:n},t))},Oe=function(e){return function(){var t="undefined"===typeof window,a=e?p.a.onlyMobile.maxWidth:p.a.onlyTablet.minWidth;return t?a:window.innerWidth}};var _e=function(e){var t=!!new ge.a(window.navigator.userAgent).mobile();return r.a.createElement(ye,{getWidth:Oe(t),props:e})};var Ce=function(e){return e.className,r.a.createElement(pe.a,{className:"menu_background p-4 m-0",size:"massive",secondary:!0},r.a.createElement(pe.a.Item,null,r.a.createElement(z.a,{as:"h4",inverted:!0},"Odiance \xa9 2020 Copyright")))},Te=a(416);var je=Object(s.b)((function(e){return{stripe:e.stripe}}),{updatePaymentStatus:function(e,t){return function(a){R.a.patch("".concat(k,"/api/orders/").concat(e,"/"),{payment_status:t}).then((function(e){2===t?a(x(!0)):3===t&&a(L())})).catch((function(e){2===t?a(x(!1)):console.log("something went wrong...update the status of order to cancelled")}))}},clearStripe:L})((function(e){var t=Object(n.useState)(!0),a=Object(E.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(E.a)(l,2),u=s[0],m=s[1],d=Object(i.g)(),h=d.status,p=(d.id,localStorage.getItem("orderId"));return Object(n.useEffect)((function(){null!==p&&("confirm"===h?e.updatePaymentStatus(p,2):"cancel"===h&&(e.updatePaymentStatus(p,3),setTimeout((function(){e.history.push("/")}),3e3)))}),[]),Object(n.useEffect)((function(){"status"in e.stripe&&(!0===e.stripe.status?(o(!1),e.clearStripe(),setTimeout((function(){e.history.push("/")}),5e3)):!1===e.stripe.status&&(e.clearStripe(),o(!1),m("Something went wrong on our side. Please contact support to get it resolved. Sorry for the inconvenience.")))}),[e.stripe]),r.a.createElement(oe.a,{className:"p-5",textAlign:"center"},r.a.createElement(Te.a,{centered:!0},r.a.createElement(Te.a.Row,null,c&&r.a.createElement(F.a,{active:!0})),r.a.createElement(Te.a.Row,null,"confirm"===h?c?r.a.createElement(z.a,{size:"medium",inverted:!0},"Processing your tickets now"):""===u?r.a.createElement("div",null,r.a.createElement(z.a,{size:"huge",inverted:!0},"Thank You!"),r.a.createElement(z.a,{size:"medium",inverted:!0},"For supporting artists and performers through Odiance.",r.a.createElement("br",null),"Enjoy the show."),r.a.createElement("br",null),r.a.createElement(z.a,{size:"small",inverted:!0},"You will receive an email shortly that is both your receipt and will include your unique links for each ticket you have purchased for this performance."),r.a.createElement(z.a,{size:"tiny",inverted:!0},"We are redirecting you to the home page...")):r.a.createElement(z.a,{size:"medium",color:"yellow"},u):r.a.createElement("div",null,r.a.createElement(z.a,{size:"medium",inverted:!0},"We're cancelling your order."),r.a.createElement(z.a,{size:"tiny",inverted:!0},"We are redirecting you to the home page...")))))}));f.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GA_CODE);var ke=Object(s.b)((function(e){return{itemsInCartCount:e.cart.length,shows:e.shows.data,panel:e.panel,auth:e.auth}}),{filterShows:function(e){return{type:"FILTER_SHOWS",payload:e}},checkAuthorizationToken:function(e){return function(t){R.a.post("".concat(k,"/accounts/accounts-token-verify/"),{token:e}).then((function(e){t(function(e){return function(t){R.a.post("".concat(k,"/accounts/accounts-token-refresh/"),{token:e})}}(e.data.token))})).catch((function(e){400===e.response.status&&"Signature has expired."===e.response.data.non_field_errors[0]&&(t(X()),t(I()))}))}}})((function(e){var t=Object(n.useState)(!0),a=Object(E.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(E.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(""),h=Object(E.a)(d,2),v=h[0],g=h[1],b=Object(n.useState)({}),S=Object(E.a)(b,2),y=S[0],O=S[1],_=Object(n.useState)(!0),C=Object(E.a)(_,2),T=C[0],j=C[1],k=Object(n.useState)("500px"),I=Object(E.a)(k,2),N=I[0],R=I[1],x=Object(i.f)(),L=window.outerWidth;function U(e){g(e),m(!0)}return Object(n.useEffect)((function(){var e=x.pathname;!function(e){f.a.set({page:e}),f.a.pageview(e)}(e),o("/"===e)}),[x]),Object(n.useEffect)((function(){localStorage.jwtToken&&e.checkAuthorizationToken(localStorage.jwtToken),L<=p.a.onlyMobile.maxWidth?(R("320px"),j(!1)):(R("500px"),j(!0))}),[]),Object(n.useEffect)((function(){if("id"in e.panel){U("show");var t=e.shows.filter((function(t){return t.id===e.panel.id}));0!==t.length&&O(t[0])}}),[e.panel]),r.a.createElement("div",null,r.a.createElement(_e,{auth:e.auth,showSearch:c,itemsInCartCount:e.itemsInCartCount,shows:e.shows,filterShows:e.filterShows,handleTogglePane:U}),r.a.createElement("div",{className:"home-background"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:A}),r.a.createElement(i.a,{exact:!0,path:"/shows/:slug",component:A}),r.a.createElement(i.a,{exact:!0,path:"/tickets/:status/:id",component:je}),r.a.createElement(i.a,{exact:!0,path:"/live",component:le}),r.a.createElement(i.a,{path:"/live/:ticket",component:Ee}),r.a.createElement(i.a,{exact:!0,path:"/cart"},r.a.createElement(ce,{handleTogglePane:U})),r.a.createElement(i.a,{exact:!0,path:"/account",component:J}))),r.a.createElement(w.a,{className:"pane-background",overlayClassName:"some-custom-overlay-class",isOpen:u,title:"Go Back",onRequestClose:function(){m(!1)},width:N,hideHeader:T,children:"account"===v?r.a.createElement(J,null):"cart"===v?r.a.createElement(ce,{handleTogglePane:U}):"show"===v?r.a.createElement(ie,{show:y}):void 0}),r.a.createElement(Ce,null))})),Ie=a(8),Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FETCH_SHOWS_REQUEST":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!0});case"FETCH_SHOWS_SUCCESS":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,data:t.payload});case"FETCH_SHOWS_FAILURE":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,error:t.payload});case"FILTER_SHOWS":return Object(Ie.a)(Object(Ie.a)({},e),{},{data:t.payload});default:return e}},Re={isAuthenticated:!1,user:{}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOGIN_REQUEST":return Object(Ie.a)(Object(Ie.a)({},Re),{},{loading:!0});case"LOGIN_SUCCESS":return{isAuthenticated:!b.a.isEmpty(t.payload),user:t.payload};case"LOGIN_FAILURE":return Object(Ie.a)(Object(Ie.a)({},Re),{},{error:t.payload});default:return e}},Le=a(95),Ue=a(200),Ae=a.n(Ue),Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"ADD_TO_CART":if(b.a.filter(e,(function(e){return e.show.title===t.payload.show.title})).length>0){for(var a=e.slice(),n=0;n<a.length;n++)if(a[n].show.title===t.payload.show.title){if(t.payload.quantity<0&&1===a[n].quantity)continue;a[n].quantity+=t.payload.quantity}return a}return[].concat(Object(Le.a)(e),[{id:Ae.a.generate(),show:t.payload.show,quantity:t.payload.quantity}]);case"REMOVE_FROM_CART":var r=b.a.findIndex(e,{id:t.payload.id});return r>=0?[].concat(Object(Le.a)(e.slice(0,r)),Object(Le.a)(e.slice(r+1))):e;case"CLEAR_CART":return[];default:return e}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FETCH_ORDERS_REQUEST":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!0});case"FETCH_ORDERS_SUCCESS":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,data:t.payload});case"FETCH_ORDERS_FAILURE":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_STRIPE_CHECKOUT":return{checkoutId:t.payload.checkoutId};case"SET_PAYMENT_STATUS":return{status:t.payload};case"CLEAR_STRIPE":return{};default:return e}},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_SHOW":return{id:t.payload};default:return e}},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FETCH_TICKETS_REQUEST":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!0});case"FETCH_TICKETS_SUCCESS":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,data:t.payload});case"FETCH_TICKETS_FAILURE":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},ze={},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SIGNUP_REQUEST":return Object(Ie.a)(Object(Ie.a)({},ze),{},{loading:!0});case"SIGNUP_SUCCESS":return Object(Ie.a)(Object(Ie.a)({},ze),{},{success:!0});case"SIGNUP_FAILURE":return Object(Ie.a)(Object(Ie.a)({},ze),{},{error:t.payload});default:return e}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LIVESHOW_REQUEST":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!0});case"LIVESHOW_SUCCESS":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,data:t.payload});case"LIVESHOW_FAILURE":return Object(Ie.a)(Object(Ie.a)({},e),{},{isLoading:!1,error:t.payload});case"LIVESHOW_CLEAR":return{};default:return e}},qe=Object(u.c)({shows:Ne,auth:xe,cart:Pe,account:Fe,stripe:We,panel:He,tickets:De,signup:Me,liveshow:Ge});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(394);var Qe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,Ve=Object(u.e)(qe,Qe(Object(u.a)(m.a)));localStorage.jwtToken&&(B(localStorage.jwtToken),Ve.dispatch(Y(h()(localStorage.jwtToken))));var Ke=Object(l.a)();o.a.render(r.a.createElement(s.a,{store:Ve},r.a.createElement(i.b,{history:Ke},r.a.createElement(ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,t,a){e.exports=a.p+"static/media/odiance-logo.98fd036a.svg"}},[[211,1,2]]]);
//# sourceMappingURL=main.189108da.chunk.js.map